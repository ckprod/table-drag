!function(){"use strict"
function t(){}function e(t,e){this.options.restoreState=!0
var o={}
for(var n in this.options)o[n]=void 0===e[n]?this.options[n]:e[n]
this.options=o,this.table=t,this.hr=t.rows[0],this.nc=this.hr.cells.length,this.nr=t.rows.length,this._init()}function o(t,o){if(t&&"TABLE"!==t.tagName)return void console.log("ERROR: DOM element/input is not a table!")
if(!(t&&t.rows&&t.rows.length>0))return void console.log("WARNING: Empty table.")
for(var r=new e(t,o||{}),i=0;i<r.nc;i++){var s=r.hr.cells[i]
s.style.cursor="move",n(s,"mousedown",function(t){r._mouseDown(t)})}}function n(t,e,o){t.attachEvent?(t["e"+e+o]=o,t[e+o]=function(){t["e"+e+o](window.event)},t.attachEvent("on"+e,t[e+o])):t.addEventListener(e,o,!1)}function r(t,e,o){t.detachEvent?(t.detachEvent("on"+e,t[e+o]),t[e+o]=null):t.removeEventListener(e,o,!1)}function i(t){var e=t.getBoundingClientRect(),o=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||o.scrollTop,i=window.pageXOffset||n.scrollLeft||o.scrollLeft,s=n.clientTop||o.clientTop||0,l=n.clientLeft||o.clientLeft||0,u=e.top+r-s,a=e.left+i-l
return{top:Math.round(u),left:Math.round(a)}}function s(t,e,o){for(var n,r=t.rows.length;r--;){n=t.rows[r]
var i=n.removeChild(n.cells[e])
n.insertBefore(i,n.cells[o])}}function l(t){return"number"==typeof t?t?0>t?-1:1:t===t?0:0/0:0/0}if(t.prototype=function(){function e(t){return t||window.event}function o(t){return t.which||t.button}function i(t){var e=t.pageX
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0)}return e}function s(t){var e=t.pageY
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return e}function l(t){if(t=e(t),this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t,!t.which){var r={}
for(var i in t)r[i]=t[i]
this._mouseDownEvent=r}if(1!==o(t))return!0
if(0==this.options.distance){if(this._mouseStarted=this._mousePrepareDrag(t)!==!1,!this._mouseStarted)return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!0}else this._mousePrepareClick(t)
var s=this
return this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},n(document.body,"mousemove",this._mouseMoveDelegate),n(document.body,"mouseup",this._mouseUpDelegate),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!0}function u(t){return t=e(t),o(t)?this._mouseStarted?(this._mouseDrag(t),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1):(this._mouseDistanceMet(t,this._mouseDownEvent)&&(this._mouseStarted=this._mousePrepareDrag(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!this.mouseStarted):this._mouseUp(t)}function a(t){return t=e(t),r(document.body,"mousemove",this._mouseMoveDelegate),r(document.body,"mouseup",this._mouseUpDelegate),this._mouseStarted?(this._mouseStarted=!1,this._mouseStopDrag(t)):this._mouseExecuteClick(t),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1}function c(t,e){var o=Math.abs(i(e)-i(t)),n=Math.abs(s(e)-s(t))
return Math.sqrt(o*o+n*n)>=this.options.distance}function p(){}function f(){}function d(){}function h(){}function m(){}return{constructor:t,options:{distance:0},_mouseDown:l,_mouseMove:u,_mouseUp:a,_mouseDistanceMet:c,_mousePrepareClick:p,_mousePrepareDrag:f,_mouseDrag:d,_mouseExecuteClick:h,_mouseStopDrag:m}}(),function(){function o(t){var e=t.pageX
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0)}return e}function n(t,e){if(window.getComputedStyle)return window.getComputedStyle(t,"").getPropertyValue(e)
var o=/(\-([a-z]){1})/g
return"float"==e&&(e="styleFloat"),o.test(e)&&(e=e.replace(o,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]}function r(t){return void 0===t||""==t||null==t?0:parseInt(t)}function u(t){return t.target||t.srcElement}function a(){return-1!=navigator.userAgent.indexOf("Trident")?!0:!1}function c(t){return"collapse"==n(t,"border-collapse")?!0:!1}function p(t,e,o){for(var n=t.rows[0].cells,r=0;r<n.length;r++){var s=i(n[r]).left
if(e>=s&&e<=s+n[r].offsetWidth)return r}return void 0===o?-1:o}function f(t){for(var e=window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle,o="",n=0;n<e.length;n++){var r=e[n]
o+=r+": "+e.getPropertyValue(r)+";"}return o}function d(t){var e=localStorage.getItem(t)
if(null!=e)try{e=JSON.parse(e)}catch(o){e=[]}else e=[]
return e}function h(t,e){var o=t.findIndex(function(t){var o=t.id
return o!=e?!1:!0})
return o}function m(t,e){if(!localStorage)return void console.log("localStorage not supported or not usable (i.e. ie in offline mode).")
for(var o=d(t),n=e.getAttribute("id"),r={id:n},i=h(o,n),s=2;s<arguments.length;s+=2)r[arguments[s]]=arguments[s+1]
0>i?o.push(r):o.splice(i,1,r),localStorage.setItem(t,JSON.stringify(o))}function v(t,e,o){if(!localStorage)return void console.log("localStorage not supported or not usable (i.e. ie in offline mode).")
for(var n=d(t),r=e.getAttribute("id"),i=h(n,r),l=e.rows[0].cells.length,u=Array(l),a=0;l>a;a++)u[a]=a
if(i>=0){var c=n[i],p=c[o],f=p.length,l=e.rows[0].cells.length
if(l==f){for(var a=0;f>a;a++){var m=p[a],v=a
u.move(m,v),u[a]!=m&&s(e,m,v)}u=p}}return u}e.prototype=new t,e.prototype.constructor=e,e.prototype._init=function(){this.pm=Array(this.nc)
for(var t=0;t<this.nc;t++)this.pm[t]=t
this.options.restoreState&&(this.pm=v("table-drag",this.table,"drag"))},e.prototype._mousePrepareDrag=function(t){var e=a(),o=this.table,s=c(o),l=i(o),p=o.rows[0],d=i(p),h=p.offsetHeight,m=e?d.left-l.left:o.clientLeft,v=e?d.top-l.top:o.clientTop,g=s?l.left:l.left+m,y=s?l.top:d.top,b=s?o.offsetWidth:o.offsetWidth-2*m,w=o.rows[0].offsetHeight,_=r(o.style.zIndex),_=_?_+1:1,D=u(t).cellIndex,x=n(o,"background-color")
this.lc=this.ic=D
var E=document.createElement("div")
E.style.position="absolute",E.style.left=g+"px",E.style.top=y+"px",E.style.width=b+"px",E.style.height=w+"px",E.style.backgroundColor=x,E.style.zIndex=_
for(var S=0;S<this.nc;S++){var T=p.cells[S],L=i(T),C=T.offsetWidth,P=T.offsetHeight,M=T.clientWidth,I=T.clientHeight,A=T.clientLeft,B=T.clientTop,O=C-M-A,W=P-I-B,U=r(n(T,"padding-top")),N=r(n(T,"padding-bottom")),k=T.getBoundingClientRect(),R=k.bottom-k.top-B-W-U-N,V=s?O+A:A,z=s?B+W:B,H=s?O+A:O,X=s?B+W:W,j=s?L.left-g-m:L.left-g,Y=s?L.top-y-v:L.top-y,J=M+V+H,q=h,F=document.createElement("div")
F.style.cssText=f(T),F.style.position="absolute",F.style.left=0,F.style.top=0,F.style.height=R+"px",F.style.borderLeftWidth=V+"px",F.style.borderTopWidth=z+"px",F.style.borderRightWidth=H+"px",F.style.borderBottomWidth=X+"px",F.innerHTML=T.innerHTML,F.style.zIndex=_+3,S==D&&(F.style.left=j+"px"),S==D&&(F.style.top=Y+"px")
var G=document.createElement("div")
G.style.position="absolute",G.style.left=j+"px",G.style.top=Y+"px",G.style.height=q+"px",G.style.width=J+"px",G.style.backgroundColor="white",G.style.zIndex=_+2,S==D&&(G.style.zIndex=_+1),S==D&&(this.de=F),S!=D&&G.appendChild(F),E.appendChild(G)}return E.appendChild(this.de),document.body.appendChild(E),this.overlay=E,this.cur=document.body.style.cursor,document.body.style.cursor="move",!0},e.prototype._mouseDrag=function(t){var e=o(t)-o(this._mouseDownEvent),i=this.table,s=this.lc,u=p(i,o(t),s)
if(this.de.style.left=r(this.de.style.left)+e+"px",u!=s){for(var f=(a(),c(i)),d=f?0:r(n(i,"border-spacing")),h=l(u-s),v=s;v!=u;v+=h){var g=v,y=g+h,b=0,b=0>h&&g>this.ic?1:h>0&&g<this.ic?-1:0,w=this.overlay.childNodes[0>h?this.ic:y+b],_=this.overlay.childNodes[h>0?this.ic:y+b],D=r(n(0>h?_.childNodes[0]:this.de,"border-left-width")),D=f?D:0,x=r(_.style.left),E=r(w.style.width)
w.style.left=x+"px",_.style.left=x+E+d-D+"px",this.pm.move(g,y),this.lc=y}this.options.restoreState&&m("table-drag",this.table,"drag",this.pm)}if(this._mouseDownEvent=t,!t.which){var S={}
for(var T in t)S[T]=t[T]
this._mouseDownEvent=S}},e.prototype._mouseStopDrag=function(t){document.body.removeChild(this.overlay)
var e=this.table,n=p(e,o(t),this.lc)
n!=this.ic&&s(e,this.ic,n),document.body.style.cursor=this.cur}}(),"undefined"!=typeof module&&module.exports?module.exports=o:window.TableDrag=o,!Array.prototype.findIndex)try{Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined")
if("function"!=typeof t)throw new TypeError("predicate must be a function")
for(var e,o=Object(this),n=o.length>>>0,r=arguments[1],i=0;n>i;i++)if(i in o&&(e=o[i],t.call(r,e,i,o)))return i
return-1}})}catch(u){Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined")
if("function"!=typeof t)throw new TypeError("predicate must be a function")
for(var e,o=Object(this),n=o.length>>>0,r=arguments[1],i=0;n>i;i++)if(i in o&&(e=o[i],t.call(r,e,i,o)))return i
return-1}}Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])}}()
