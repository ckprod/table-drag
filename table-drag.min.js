!function(){"use strict"
function t(t,n){function r(t,e){if(window.getComputedStyle)return window.getComputedStyle(t,"").getPropertyValue(e)
var o=/(\-([a-z]){1})/g
return"float"==e&&(e="styleFloat"),o.test(e)&&(e=e.replace(o,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]}function i(t){return void 0===t||""==t||null==t?0:parseInt(t)}function l(){return-1!=navigator.userAgent.indexOf("Trident")?!0:!1}function h(){return"collapse"==r(t,"border-collapse")?!0:!1}return t&&"TABLE"!==t.tagName?(console.log("ERROR: DOM element/input is not a table!"),""):this.init(t,n||{})?"":(this.mouseStart=function(e){var n=l(),s=h(),c=d(t),a=t.rows[0],m=d(a),f=a.offsetHeight,p=n?m.left-c.left:t.clientLeft,y=n?m.top-c.top:t.clientTop,v=s?c.left:c.left+p,g=s?c.top:m.top,w=s?t.offsetWidth:t.offsetWidth-2*p,b=t.rows[0].offsetHeight,x=i(t.style.zIndex),x=x?x+1:1,D=u(e).cellIndex,E=r(t,"background-color")
this.lc=this.ic=D
var S=document.createElement("div")
S.style.position="absolute",S.style.left=v+"px",S.style.top=g+"px",S.style.width=w+"px",S.style.height=b+"px",S.style.backgroundColor=E,S.style.zIndex=x
for(var T=0;T<this.nc;T++){var M=a.cells[T],L=d(M),C=M.offsetWidth,I=M.offsetHeight,A=M.clientWidth,O=M.clientHeight,U=M.clientLeft,W=M.clientTop,H=C-A-U,N=I-O-W,R=i(r(M,"padding-top")),z=i(r(M,"padding-bottom")),B=M.getBoundingClientRect().height-W-N-R-z,V=s?H+U:U,X=s?L.left-v-p:L.left-v,k=s?L.top-g-y:L.top-g,P=A+2*V,j=f,J=document.createElement("div")
J.style.cssText=o(M),J.style.position="absolute",J.style.left=0,J.style.top=0,J.style.height=B+"px",J.style.borderLeftWidth=V+"px",J.style.borderTopWidth=V+"px",J.style.borderRightWidth=V+"px",J.style.borderBottomWidth=V+"px",J.innerHTML=M.innerHTML,J.style.zIndex=x+2,T==D&&(J.style.left=X+"px"),T==D&&(J.style.top=k+"px")
var Y=document.createElement("div")
Y.style.position="absolute",Y.style.left=X+"px",Y.style.top=k+"px",Y.style.height=j+"px",Y.style.width=P+"px",Y.style.backgroundColor="white",Y.style.zIndex=x+1,T==D&&(this.de=J),S.appendChild(Y),T!=D&&Y.appendChild(J)}return S.appendChild(this.de),document.body.appendChild(S),this.overlay=S,this.cur=document.body.style.cursor,document.body.style.cursor="move",!0},this.mouseDrag=function(o){var n=s(o)-s(this.mouseDownEvent),n=s(o)-this.mouseDownEvent1,u=this.lc,d=e(t,o,u)
if(this.de.style.left=i(this.de.style.left)+n+"px",d!=u){for(var c=(l(),h()),f=c?0:i(r(t,"border-spacing")),p=a(d-u),y=u;y!=d;y+=p){var v=y,g=v+p,w=0,w=0>p&&v>this.ic?1:p>0&&v<this.ic?-1:0,b=(this.pm,this.overlay.childNodes[g+w]),x=this.overlay.childNodes[this.ic]
if(0>p){var D=i(r(b.childNodes[0],"border-left-width")),D=c?D:0,E=i(b.style.left),S=i(x.style.width)
x.style.left=E+"px",b.style.left=E+S+f-D+"px"}else{var D=i(r(this.de,"border-left-width")),D=c?D:0,E=i(x.style.left),S=i(b.style.width)
b.style.left=E+"px",x.style.left=E+S+f-D+"px"}this.pm.move(v,g),this.lc=g}m(t,this.pm)}this.mouseDownEvent=o,this.mouseDownEvent1=s(o)},void(this.mouseStop=function(o){document.body.removeChild(this.overlay)
var n=e(t,o,this.lc)
n!=this.ic&&c(t,this.ic,n),document.body.style.cursor=this.cur}))}function e(t,e,o){for(var n=t.rows[0].cells,r=s(e),i=0;i<n.length;i++){var l=d(n[i]).left
if(r>=l&&r<=l+n[i].offsetWidth)return i}return void 0===o?-1:o}function o(t){for(var e=window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle,o="",n=0;n<e.length;n++){var r=e[n]
o+=r+": "+e.getPropertyValue(r)+";"}return o}function n(t,e,o){t.attachEvent?(t["e"+e+o]=o,t[e+o]=function(){t["e"+e+o](window.event)},t.attachEvent("on"+e,t[e+o])):t.addEventListener(e,o,!1)}function r(t,e,o){t.detachEvent?(t.detachEvent("on"+e,t[e+o]),t[e+o]=null):t.removeEventListener(e,o,!1)}function i(t){var e=t.which
return void 0===e?t.button:e}function s(t){var e=t.pageX
return void 0===e&&(e=t.clientX+(document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft||0)-(document.documentElement&&document.documentElement.clientLeft||document.body&&document.body.clientLeft||0)),e}function l(t){var e=t.pageY
return void 0===e&&(e=t.clientX+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0)-(document.documentElement&&document.documentElement.clientTop||document.body&&document.body.clientTop||0)),e}function u(t){return t.target||t.srcElement}function d(t){var e=t.getBoundingClientRect(),o=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||o.scrollTop,i=window.pageXOffset||n.scrollLeft||o.scrollLeft,s=n.clientTop||o.clientTop||0,l=n.clientLeft||o.clientLeft||0,u=e.top+r-s,d=e.left+i-l
return{top:Math.round(u),left:Math.round(d)}}function c(t,e,o){for(var n,r=t.rows.length;r--;){n=t.rows[r]
var i=n.removeChild(n.cells[e])
n.insertBefore(i,n.cells[o])}}function a(t){return"number"==typeof t?t?0>t?-1:1:t===t?0:0/0:0/0}function h(){var t=localStorage.getItem("table-drag")
if(null!=t)try{t=JSON.parse(t)}catch(e){console.log(e)}else t=[]
return t}function m(t,e){var o=h(),n=t.getAttribute("id"),r={tableId:n,permutationMemory:e},i=o.findIndex(function(t){var e=t.tableId
return e!=n?!1:!0})
0>i?o.push(r):o.splice(i,1,r),localStorage.setItem("table-drag",JSON.stringify(o))}function f(t){for(var e=h(),o=t.getAttribute("id"),n=e.findIndex(function(t){var e=t.tableId
return e!=o?!1:!0}),r=t.rows[0].cells.length,i=Array(r),s=0;r>s;s++)i[s]=s
if(0>n)return i
var l=e[n],u=l.permutationMemory,d=u.length
if(r==d){for(var s=0;s<u.length;s++){var a=u[s],m=s
i.move(a,m),i[s]!=a&&c(t,a,m)}return u}return i}t.prototype={options:{distance:0},init:function(t){if(!(t&&t.rows&&t.rows.length>0))return!0
this.hr=t.rows[0],this.nc=this.hr.cells.length
var e=this
this.pm=f(t)
for(var o=0;o<this.nc;o++){var r=this.hr.cells[o]
r.style.cursor="move",n(r,"mousedown",function(t){e.mouseDown(t)})}return!1},mouseDown:function(t){if(t=t||window.event,this.mouseStarted&&this.mouseUp(t),this.mouseDownEvent=t,this.mouseDownEvent1=s(t),1!==i(t))return!0
if(this.mouseDistanceMet(t)&&(this.mouseStarted=this.mouseStart(t)!==!1,!this.mouseStarted))return t.preventDefault?t.preventDefault():t.returnValue=!1,!0
var e=this
return this.mouseMoveDelegate=function(t){return e.mouseMove(t)},this.mouseUpDelegate=function(t){return e.mouseUp(t)},n(document.body,"mousemove",this.mouseMoveDelegate),n(document.body,"mouseup",this.mouseUpDelegate),t.preventDefault?t.preventDefault():t.returnValue=!1,!0},mouseMove:function(t){return t=t||window.event,i(t)?this.mouseStarted?(this.mouseDrag(t),t.preventDefault?t.preventDefault():(t.returnValue=!1,!1)):(this.mouseDistanceMet(t)&&(this.mouseStarted=this.mouseStart(this.mouseDownEvent,t)!==!1,this.mouseStarted?this.mouseDrag(t):this.mouseUp(t)),!this.mouseStarted):this.mouseUp(t)},mouseUp:function(t){return t=t||window.event,r(document.body,"mousemove",this.mouseMoveDelegate),r(document.body,"mouseup",this.mouseUpDelegate),this.mouseStarted&&(this.mouseStarted=!1,this.mouseStop(t)),!1},mouseDistanceMet:function(t){var e=Math.abs(s(this.mouseDownEvent)-s(t)),o=Math.abs(l(this.mouseDownEvent)-l(t))
return Math.sqrt(e*e+o*o)>=this.options.distance},mouseStart:function(){},mouseDrag:function(){},mouseStop:function(){}},Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},"undefined"!=typeof module&&module.exports?module.exports=t:window.TableDrag=t,Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined")
if("function"!=typeof t)throw new TypeError("predicate must be a function")
for(var e,o=Object(this),n=o.length>>>0,r=arguments[1],i=0;n>i;i++)if(i in o&&(e=o[i],t.call(r,e,i,o)))return i
return-1}})}()
