!function(){"use strict"
function t(t,s){function i(t,e){return window.getComputedStyle(t,"").getPropertyValue(e)}function u(t){return void 0===t||""==t||null==t?0:parseInt(t)}return t&&"TABLE"!==t.tagName?"":this.init(t,s||{})?"":(this.mouseStart=function(e){var s=i(t,"border-collapse"),r=u(i(t,"border-left-width")),l=t.clientLeft,h=u(i(t,"border-top-width")),d=t.clientTop,a="collapse"==s?l-r:0,c="collapse"==s?d-h:0,p=("collapse"==s?0:u(i(t,"border-spacing")),a?0:t.clientLeft,a?0:t.clientTop,i(t,"padding"),i(t,"background-color")),f=t.style,m=u(f.zIndex),m=m?m+1:1,y=n(t),v=a?t.offsetWidth:t.clientWidth,g=e.target.cellIndex
this.lc=this.ic=g,this.pm=Array(this.nhc),this.diffLeft=a
var w=document.createElement("div")
w.id="drag-base",w.style.position="absolute",w.style.left="collapse"==s?y.left+(a?0:l)+"px":y.left+l+"px",w.style.top="collapse"==s?y.top+(c?0:d)+"px":n(t.rows[0]).top+"px",w.style.width=v+"px",w.style.height=t.rows[0].offsetHeight+"px",w.style.backgroundColor=p,w.style.zIndex=m
for(var b=0;b<this.nc;b++){this.pm[b]=b
var x=this.hr.cells[b],D=u(i(x,"border-left-width")),S=u(i(x,"border-right-width")),E=(u(i(x,"border-top-width")),u(i(x,"border-bottom-width")),u(i(x,"padding-top"))),L=u(i(x,"padding-bottom")),M=(x.clientLeft,x.clientTop,n(x)),T=(u(i(x,"height")),x.offsetHeight,x.clientHeight,document.createElement("div"))
T.style.width=(a?x.clientWidth+D+S:x.offsetWidth)+"px",T.style.height=x.offsetHeight+"px",T.style.backgroundColor="#FFFFFF",T.style.position="absolute",T.style.left=M.left-y.left-t.clientLeft+"px",T.style.top=M.top-u(w.style.top)-(c?d:0)+"px",T.style.zIndex=m+1
var C=document.createElement("div")
C.style.cssText=o(x),C.style.position="absolute",C.style.left="0px",b==g&&(C.style.left=T.style.left),b==g&&(C.style.left=M.left-y.left-t.clientLeft+"px"),C.style.top="0px",b==g&&(C.style.top=T.style.top),C.style.zIndex=m+2,C.style.height=x.clientHeight-E-L+"px",C.innerHTML=x.innerHTML,b==g&&(this.de=C),w.appendChild(T),b!=g&&T.appendChild(C)}return w.appendChild(this.de),document.body.appendChild(w),this.overlay=w,this.cur=document.body.style.cursor,document.body.style.cursor="move",!0},this.mouseDrag=function(o){var s=o.pageX-this.mouseDownEvent.pageX,n=this.lc,r=e(t,o,n),h=this.diffLeft
if(this.de.style.left=u(this.de.style.left)+s+"px",r!=n)for(var d=i(t,"border-collapse"),a="collapse"==d?0:u(i(t,"border-spacing")),c=l(r-n),p=n;p!=r;p+=c){var f=p,m=f+c,y=this.pm,v=this.overlay.childNodes[y[m]],g=this.overlay.childNodes[y[f]]
if(0>c){var w=u(i(v.childNodes[0],"border-left-width")),w="separate"==d?0:w,b=u(v.style.left),x=u(g.style.width)
g.style.left=b+"px",v.style.left=b+x+a-(h?w:0)+"px"}else{var w=u(i(this.de,"border-left-width")),w="separate"==d?0:w,b=u(g.style.left),x=u(v.style.width)
v.style.left=b+"px",g.style.left=b+x+a-(h?w:0)+"px"}this.pm.move(f,m),this.lc=m}this.mouseDownEvent=o},void(this.mouseStop=function(o){document.body.removeChild(this.overlay)
var s=e(t,o,this.lc)
s!=this.ic&&r(t,this.ic,s),document.body.style.cursor=this.cur}))}function e(t,e,o){for(var s=t.rows[0].cells,i=e.pageX,r=0;r<s.length;r++){var l=n(s[r]).left
if(i>=l&&i<=l+s[r].offsetWidth)return r}return void 0===o?-1:o}function o(t){for(var e=window.getComputedStyle(t,null),o="",s=0;s<e.length;s++){var i=e[s]
o+=i+": "+e.getPropertyValue(i)+";"}return o}function s(t,e,o){t.attachEvent?(t["e"+e+o]=o,t[e+o]=function(){t["e"+e+o](window.event)},t.attachEvent("on"+e,t[e+o])):t.addEventListener(e,o,!1)}function i(t,e,o){t.detachEvent?(t.detachEvent("on"+e,t[e+o]),t[e+o]=null):t.removeEventListener(e,o,!1)}function n(t){var e=t.getBoundingClientRect(),o=document.body,s=document.documentElement,i=window.pageYOffset||s.scrollTop||o.scrollTop,n=window.pageXOffset||s.scrollLeft||o.scrollLeft,r=s.clientTop||o.clientTop||0,l=s.clientLeft||o.clientLeft||0,u=e.top+i-r,h=e.left+n-l
return{top:Math.round(u),left:Math.round(h)}}function r(t,e,o){for(var s,i=t.rows.length;i--;){s=t.rows[i]
var n=s.removeChild(s.cells[e])
s.insertBefore(n,s.cells[o])}}function l(t){return"number"==typeof t?t?0>t?-1:1:t===t?0:0/0:0/0}t.prototype={options:{distance:0},init:function(t){if(!(t&&t.rows&&t.rows.length>0))return!0
this.hr=t.rows[0],this.nc=this.hr.cells.length
for(var e=this,o=0;o<this.nc;o++){var i=this.hr.cells[o]
i.style.cursor="move",s(i,"mousedown",function(t){e.mouseDown(t)})}return!1},mouseDown:function(t){if(this.mouseStarted&&this.mouseUp(t),this.mouseDownEvent=t,1!==t.which)return!0
if(this.mouseDistanceMet(t)&&(this.mouseStarted=this.mouseStart(t)!==!1,!this.mouseStarted))return t.preventDefault(),!0
var e=this
return this.mouseMoveDelegate=function(t){return e.mouseMove(t)},this.mouseUpDelegate=function(t){return e.mouseUp(t)},s(document.body,"mousemove",this.mouseMoveDelegate),s(document.body,"mouseup",this.mouseUpDelegate),t.preventDefault(),!0},mouseMove:function(t){return t.which?this.mouseStarted?(this.mouseDrag(t),t.preventDefault()):(this.mouseDistanceMet(t)&&(this.mouseStarted=this.mouseStart(this.mouseDownEvent,t)!==!1,this.mouseStarted?this.mouseDrag(t):this.mouseUp(t)),!this.mouseStarted):this.mouseUp(t)},mouseUp:function(t){return i(document.body,"mousemove",this.mouseMoveDelegate),i(document.body,"mouseup",this.mouseUpDelegate),this.mouseStarted&&(this.mouseStarted=!1,this.mouseStop(t)),!1},mouseDistanceMet:function(t){var e=Math.abs(this.mouseDownEvent.pageX-t.pageX),o=Math.abs(this.mouseDownEvent.pageY-t.pageY)
return Math.sqrt(e*e+o*o)>=this.options.distance},mouseStart:function(){},mouseDrag:function(){},mouseStop:function(){}},Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},"undefined"!=typeof module&&module.exports?module.exports=t:window.TableDrag=t}()
