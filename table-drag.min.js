!function(){"use strict"
function e(e,n){function s(e,t){if(window.getComputedStyle)return window.getComputedStyle(e,"").getPropertyValue(t)
var o=/(\-([a-z]){1})/g
return"float"==t&&(t="styleFloat"),o.test(t)&&(t=t.replace(o,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]}function i(e){return void 0===e||""==e||null==e?0:parseInt(e)}function l(){var e=navigator.userAgent
return-1!=e.indexOf("Chrome")?"ch":-1!=e.indexOf("Firefox")?"ff":-1!=e.indexOf("Opera")?"op":-1!=e.indexOf("MSIE")?"ie":-1!=e.indexOf("Safari")?"sa":"ub"}return e&&"TABLE"!==e.tagName?"":this.init(e,n||{})?"":(this.mouseStart=function(t){var n=s(e,"border-collapse"),r=i(s(e,"border-left-width")),c=e.clientLeft,a=i(s(e,"border-top-width")),h=e.clientTop,m="collapse"==n?c-r:0,f="collapse"==n?h-a:0,p=("collapse"==n?0:i(s(e,"border-spacing")),m?0:e.clientLeft,m?0:e.clientTop,s(e,"padding"),s(e,"background-color")),v=e.style,y=i(v.zIndex),y=y?y+1:1,w=d(e),g=m?e.offsetWidth:e.clientWidth,b=u(t).cellIndex,x="ie"==l()?!0:!1
this.lc=this.ic=b,this.pm=Array(this.nhc),this.diffLeft=m
var D=document.createElement("div")
D.id="drag-base",D.style.position="absolute",D.style.left="collapse"==n?x?w.left+r+"px":w.left+(m?0:c)+"px":w.left+c+"px",D.style.top="collapse"==n?x?w.top+a+"px":w.top+(f?0:h)+"px":d(e.rows[0]).top+"px",D.style.width=x?g-2*r+"px":g+"px",D.style.height=e.rows[0].offsetHeight+"px",D.style.backgroundColor=p,D.style.zIndex=y
for(var E=0;E<this.nc;E++){this.pm[E]=E
var S=this.hr.cells[E],L=i(s(S,"border-left-width")),M=i(s(S,"border-right-width")),T=(i(s(S,"border-top-width")),i(s(S,"border-bottom-width")),i(s(S,"padding-top"))),C=i(s(S,"padding-bottom")),U=(S.clientLeft,S.clientTop,d(S)),F=(i(s(S,"height")),S.offsetHeight,S.clientHeight,document.createElement("div"))
F.style.width=(m?S.clientWidth+L+M:S.offsetWidth)+"px",F.style.height=S.offsetHeight+"px",F.style.backgroundColor="#FFFFFF",F.style.position="absolute",F.style.left=x?U.left-w.left-r+"px":U.left-w.left-e.clientLeft+"px",F.style.top=U.top-i(D.style.top)-(f?h:0)+"px",F.style.zIndex=y+1
var O=document.createElement("div")
O.style.cssText=o(S),O.style.position="absolute",O.style.left="0px",E==b&&(O.style.left=F.style.left),O.style.top="0px",E==b&&(O.style.top=F.style.top),O.style.zIndex=y+2,O.style.height=S.clientHeight-T-C+"px",O.innerHTML=S.innerHTML,E==b&&(this.de=O),D.appendChild(F),E!=b&&F.appendChild(O)}return D.appendChild(this.de),document.body.appendChild(D),this.overlay=D,this.cur=document.body.style.cursor,document.body.style.cursor="move",!0},this.mouseDrag=function(o){var n=r(o)-r(this.mouseDownEvent),n=r(o)-this.mouseDownEvent1,u=this.lc,d=t(e,o,u),c=this.diffLeft
if(this.de.style.left=i(this.de.style.left)+n+"px",d!=u)for(var h=s(e,"border-collapse"),m="collapse"==h?0:i(s(e,"border-spacing")),f=a(d-u),p=u;p!=d;p+=f){var v=p,y=v+f,w=this.pm,g=this.overlay.childNodes[w[y]],b=this.overlay.childNodes[w[v]],x="ie"==l()?!0:!1
if(0>f){var D=i(s(g.childNodes[0],"border-left-width")),D="separate"==h?0:D,E=i(g.style.left),S=i(b.style.width)
b.style.left=E+"px",g.style.left=x?E+S+m+"px":E+S+m-(c?D:0)+"px"}else{var D=i(s(this.de,"border-left-width")),D="separate"==h?0:D,E=i(b.style.left),S=i(g.style.width)
g.style.left=E+"px",b.style.left=x?E+S+m+"px":E+S+m-(c?D:0)+"px"}this.pm.move(v,y),this.lc=y}this.mouseDownEvent=o,this.mouseDownEvent1=r(o)},void(this.mouseStop=function(o){document.body.removeChild(this.overlay)
var n=t(e,o,this.lc)
n!=this.ic&&c(e,this.ic,n),document.body.style.cursor=this.cur}))}function t(e,t,o){for(var n=e.rows[0].cells,s=r(t),i=0;i<n.length;i++){var l=d(n[i]).left
if(s>=l&&s<=l+n[i].offsetWidth)return i}return void 0===o?-1:o}function o(e){for(var t=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle,o="",n=0;n<t.length;n++){var s=t[n]
o+=s+": "+t.getPropertyValue(s)+";"}return o}function n(e,t,o){e.attachEvent?(e["e"+t+o]=o,e[t+o]=function(){e["e"+t+o](window.event)},e.attachEvent("on"+t,e[t+o])):e.addEventListener(t,o,!1)}function s(e,t,o){e.detachEvent?(e.detachEvent("on"+t,e[t+o]),e[t+o]=null):e.removeEventListener(t,o,!1)}function i(e){var t=e.which
return void 0===t?e.button:t}function r(e){var t=e.pageX
return void 0===t&&(t=e.clientX+(document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft||0)-(document.documentElement&&document.documentElement.clientLeft||document.body&&document.body.clientLeft||0)),t}function l(e){var t=e.pageY
return void 0===t&&(t=e.clientX+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0)-(document.documentElement&&document.documentElement.clientTop||document.body&&document.body.clientTop||0)),t}function u(e){return e.target||e.srcElement}function d(e){var t=e.getBoundingClientRect(),o=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||o.scrollTop,i=window.pageXOffset||n.scrollLeft||o.scrollLeft,r=n.clientTop||o.clientTop||0,l=n.clientLeft||o.clientLeft||0,u=t.top+s-r,d=t.left+i-l
return{top:Math.round(u),left:Math.round(d)}}function c(e,t,o){for(var n,s=e.rows.length;s--;){n=e.rows[s]
var i=n.removeChild(n.cells[t])
n.insertBefore(i,n.cells[o])}}function a(e){return"number"==typeof e?e?0>e?-1:1:e===e?0:0/0:0/0}e.prototype={options:{distance:0},init:function(e){if(!(e&&e.rows&&e.rows.length>0))return!0
this.hr=e.rows[0],this.nc=this.hr.cells.length
for(var t=this,o=0;o<this.nc;o++){var s=this.hr.cells[o]
s.style.cursor="move",n(s,"mousedown",function(e){t.mouseDown(e)})}return!1},mouseDown:function(e){if(e=e||window.event,this.mouseStarted&&this.mouseUp(e),this.mouseDownEvent=e,this.mouseDownEvent1=r(e),1!==i(e))return!0
if(this.mouseDistanceMet(e)&&(this.mouseStarted=this.mouseStart(e)!==!1,!this.mouseStarted))return e.preventDefault?e.preventDefault():e.returnValue=!1,!0
var t=this
return this.mouseMoveDelegate=function(e){return t.mouseMove(e)},this.mouseUpDelegate=function(e){return t.mouseUp(e)},n(document.body,"mousemove",this.mouseMoveDelegate),n(document.body,"mouseup",this.mouseUpDelegate),e.preventDefault?e.preventDefault():e.returnValue=!1,!0},mouseMove:function(e){return e=e||window.event,i(e)?this.mouseStarted?(this.mouseDrag(e),e.preventDefault?e.preventDefault():(e.returnValue=!1,!1)):(this.mouseDistanceMet(e)&&(this.mouseStarted=this.mouseStart(this.mouseDownEvent,e)!==!1,this.mouseStarted?this.mouseDrag(e):this.mouseUp(e)),!this.mouseStarted):this.mouseUp(e)},mouseUp:function(e){return e=e||window.event,s(document.body,"mousemove",this.mouseMoveDelegate),s(document.body,"mouseup",this.mouseUpDelegate),this.mouseStarted&&(this.mouseStarted=!1,this.mouseStop(e)),!1},mouseDistanceMet:function(e){var t=Math.abs(r(this.mouseDownEvent)-r(e)),o=Math.abs(l(this.mouseDownEvent)-l(e))
return Math.sqrt(t*t+o*o)>=this.options.distance},mouseStart:function(){},mouseDrag:function(){},mouseStop:function(){}},Array.prototype.move=function(e,t){this.splice(t,0,this.splice(e,1)[0])},"undefined"!=typeof module&&module.exports?module.exports=e:window.TableDrag=e}()
